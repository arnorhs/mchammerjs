window.MCHammer=(function(){var b=function(d){return typeof d==="function"};var c=function(){var j=arguments[0]||{},g=1,h=arguments.length,d=false,f;if(typeof j==="boolean"){d=j;j=arguments[1]||{};g=2}if(typeof j!=="object"&&!b(j)){j={}}for(;g<h;g++){if((f=arguments[g])!=null){for(var e in f){var k=j[e],l=f[e];if(j===l){continue}if(d&&l&&typeof l==="object"&&!l.nodeType){j[e]=c(d,k||(l.length!=null?[]:{}),l)}else{if(l!==undefined){j[e]=l}}}}}return j};function a(d){this.options=c({},{debug:false,debugOnlyTriggers:false},d);this.items={};this.events={}}a.prototype.log=function(){if(!this.options.debug){return}var d=arguments;if(this.options.debugOnlyTriggers&&d[0].indexOf("trigger:")!=0){return}Array.prototype.unshift.call(d,"{MCH.log} ");console.log.apply(console,d)};a.prototype.addItem=function(e,d){if(typeof this.items[e]!=="undefined"){this.log("addItem: ",e,d,"Warning: item with the same ID already there");return false}d.id=e;d._={};this.items[e]=d;this.log("addItem: ",e,d);this.trigger(d,"MCH:addItem");return true};a.prototype.updateItem=function(e,d){if(typeof this.items[e]==="undefined"){this.log("updateItem: ",e,"Warning: No item found with that ID");return false}this.items[e]=c(this.items[e],d);this.trigger(e,"MCH:updateItem",d);this.log("updateItem: ",e,d);return true};a.prototype.removeItem=function(d){if(typeof this.items[d]==="undefined"){this.log("removeItem: ",d,"Warning: No item found with that ID");return false}this.trigger(d,"MCH:removeItem");delete this.items[d];this.log("removeItem: ",d);return true};a.prototype.getItem=function(d){if(typeof this.items[d]==="undefined"){this.log("getItem: ",d,"Warning: Item not found");return{}}this.log("getItem: ",d);return this.items[d]};a.prototype.bind=function(d,e){if(typeof this.events[d]==="undefined"){this.events[d]=[]}if(!b(e)){this.log("bind: "+d,e,"Error: Not a function, is a: "+typeof e);return false}this.events[d].push(e);this.log("bind: "+d,e);return true};a.prototype.trigger=function(k,e,j){if(typeof this.events[e]==="undefined"){this.log("trigger: ",k,e,"Warning: Event triggered has no event handler");return false}var g;if(typeof k==="object"&&k.hasOwnProperty("_")){g=k;k=g.id}else{g=this.getItem(k)}g._.trigger=e;var h=[g];if(typeof j!=="undefined"){h.push(j)}for(var f=0,d=this.events[e].length;f<d;f++){this.events[e][f].apply(this,h)}this.log("trigger: ",k,e);return true};return a})();